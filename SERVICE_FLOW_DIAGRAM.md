# 🔄 서비스 플로우 다이어그램 (Service Flow Diagram)

## 📑 목차
1. [차트 분석 서비스 플로우](#1-차트-분석-서비스-플로우)
2. [뉴스 분석 서비스 플로우](#2-뉴스-분석-서비스-플로우)
3. [AI 분석 서비스 플로우](#3-ai-분석-서비스-플로우)
4. [포트폴리오 최적화 서비스 플로우](#4-포트폴리오-최적화-서비스-플로우)
5. [AI 챗봇 서비스 플로우](#5-ai-챗봇-서비스-플로우)
6. [인증/게시판 서비스 플로우](#6-인증게시판-서비스-플로우)

---

## 1. 차트 분석 서비스 플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                         USER ACTION                              │
│  사용자가 chart.html에서 종목 입력 (예: "AAPL")                 │
│  시간대 선택 (1d, 1h, 5m 등)                                    │
│  EMA/RSI 기간 설정                                                │
│  "데이터 가져오기" 버튼 클릭                                      │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                    FRONTEND (chart.html)                        │
│  JavaScript: fetch() 함수 실행                                   │
│  URL: /api/chart/data/AAPL/1d/50/14                            │
│  Method: GET                                                    │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              SPRING BOOT (ChartController.java)                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ @GetMapping("/data/{ticker}/{interval}/{ema}/{rsi}")     │  │
│  │ 1. 요청 로깅                                              │  │
│  │ 2. Flask URL 생성:                                       │  │
│  │    http://localhost:5000/api/data/AAPL/1d/50/14         │  │
│  │ 3. RestTemplate으로 Flask 호출                           │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK (app.py + yahoo_finance_service.py)           │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ @app.route('/api/data/<ticker>/<interval>/<ema>/<rsi>') │  │
│  │                                                          │  │
│  │ 1. YahooFinanceService.fetch_yahoo_data() 호출          │  │
│  │                                                          │  │
│  │ 2. yfinance 모듈로 Yahoo Finance API 호출               │  │
│  │    stock = yf.Ticker("AAPL")                            │  │
│  │    df = stock.history(period="1y", interval="1d")       │  │
│  │                                                          │  │
│  │ 3. Pandas로 데이터 처리                                 │  │
│  │    - 캔들스틱 데이터 변환                                │  │
│  │    - EMA 계산 (50일)                                     │  │
│  │    - RSI 계산 (14일)                                      │  │
│  │    - 거래량 데이터                                        │  │
│  │    - 종목 정보 (이름, 심볼 등)                           │  │
│  │                                                          │  │
│  │ 4. JSON 형태로 반환                                      │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              YAHOO FINANCE API                                  │
│  • 실시간 주가 데이터                                            │
│  • 과거 이력 데이터                                             │
│  • 거래량 정보                                                  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓ (JSON Response)
┌──────────────────────────────────────────────────────────────────┐
│              FLASK Response → SPRING BOOT                        │
│  {                                                               │
│    "success": true,                                              │
│    "data": {                                                     │
│      "candlestick": [{time, open, high, low, close}],           │
│      "ema": [{time, value}],                                     │
│      "rsi": [{time, value}],                                     │
│      "volume": [{time, value}],                                 │
│      "ticker_info": {...}                                        │
│    }                                                             │
│  }                                                               │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FRONTEND (chart.js)                                │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 1. createChart() 함수 실행                                │  │
│  │                                                          │  │
│  │ 2. Lightweight Charts 라이브러리로 차트 생성:            │  │
│  │    - Candlestick Series                                  │  │
│  │    - EMA Line Series                                     │  │
│  │    - RSI Line Series (하단 패널)                        │  │
│  │    - Volume Series (바 차트)                             │  │
│  │                                                          │  │
│  │ 3. 차트 렌더링                                            │  │
│  │    - 다크 테마 적용                                       │  │
│  │    - 실시간 데이터 표시                                   │  │
│  │    - 호버 효과                                           │  │
│  │                                                          │  │
│  │ 4. 자동 새로고침 설정 (60초마다)                         │  │
│  └──────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                         USER VIEW                                │
│  사용자가 실시간 차트 확인                                        │
│  - 캔들스틱 차트                                                 │
│  - EMA 이동평균선                                               │
│  - RSI 지표                                                      │
│  - 거래량                                                        │
└──────────────────────────────────────────────────────────────────┘
```

### ⏱️ 시간 소요
- Yahoo Finance API 호출: ~1-2초
- 데이터 처리 (Pandas): ~0.5초
- 차트 렌더링: ~0.3초
- **총 소요 시간**: ~2-3초

---

## 2. 뉴스 분석 서비스 플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                         USER ACTION                              │
│  사용자가 index.html에서:                                        │
│  - 뉴스 소스 선택 (한국경제, 네이버, Google 등)                  │
│  - 분석 기간 설정                                                │
│  - 종목 선택 (선택 사항)                                        │
│  "뉴스분석" 버튼 클릭                                            │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                    FRONTEND (index.js)                          │
│  JavaScript: fetch() 함수 실행                                   │
│  URL: /api/chart/news/rss?feed=naver                           │
│  Method: GET                                                    │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              SPRING BOOT (ChartController.java)                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ @GetMapping("/news/rss")                                 │  │
│  │ 1. Flask URL 생성:                                       │  │
│  │    http://localhost:5000/api/news/rss?feed=naver        │  │
│  │ 2. RestTemplate으로 Flask 호출                           │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK (app.py + news_rss_service.py)               │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ @app.route('/api/news/rss')                              │  │
│  │                                                          │  │
│  │ 1. feed_key 확인 (naver, hankyung, google 등)          │  │
│  │                                                          │  │
│  │ 2. 네이버 크롤링 (_crawl_naver_news()):                │  │
│  │    a) requests.get()로 페이지 로드                      │  │
│  │    b) BeautifulSoup으로 HTML 파싱                       │  │
│  │    c) 선택자로 뉴스 추출:                               │  │
│  │       - #contentarea_left > ul.realtimeNewsList > li   │  │
│  │       - dl > dd:nth-child(2) > a (헤드라인)             │  │
│  │       - dl > dd:nth-child(3) > span.wdate (날짜)        │  │
│  │    d) UTC 시간으로 변환                                  │  │
│  │                                                          │  │
│  │ 3. RSS 파싱 (_parse_rss_feed()):                       │  │
│  │    a) feedparser.parse(url)                            │  │
│  │    b) entries에서 뉴스 추출                             │  │
│  │                                                          │  │
│  │ 4. 여러 소스 병렬 처리                                   │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              EXTERNAL NEWS SOURCES                              │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐  │
│  │네이버 금융 │ │한국경제    │ │Google News │ │Yahoo Finance│ │
│  │(크롤링)   │ │(RSS)       │ │(RSS)      │ │(RSS)       │  │
│  │Nasdaq     │ │매일경제    │ │MarketBeat  │ │            │  │
│  │(RSS)      │ │(RSS)       │ │(RSS)      │ │            │  │
│  └────────────┘ └────────────┘ └────────────┘ └────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓ (병렬 수집)
┌──────────────────────────────────────────────────────────────────┐
│              FLASK: 감성 분석 (news_analysis_service.py)         │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ from textblob import TextBlob                            │  │
│  │                                                          │  │
│  │ def analyze_news_endpoint(data):                        │  │
│  │   articles = data.get('articles', [])                   │  │
│  │                                                          │  │
│  │   for article in articles:                              │  │
│  │     # TextBlob으로 감성 분석                            │  │
│  │     blob = TextBlob(article['title'])                   │  │
│  │     sentiment = blob.sentiment.polarity                 │  │
│  │                                                          │  │
│  │     if sentiment > 0.1:                                 │  │
│  │       article['sentiment'] = 'positive'                │  │
│  │     elif sentiment < -0.1:                             │  │
│  │       article['sentiment'] = 'negative'                 │  │
│  │     else:                                               │  │
│  │       article['sentiment'] = 'neutral'                 │  │
│  │                                                          │  │
│  │   return {                                              │  │
│  │     'success': True,                                    │  │
│  │     'articles': articles,                               │  │
│  │     'sentiment_summary': {...}                          │  │
│  │   }                                                      │  │
│  └──────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓ (JSON Response)
┌──────────────────────────────────────────────────────────────────┐
│              FRONTEND (news.html)                               │
│  JavaScript: 화면에 뉴스 카드 표시                               │
│  - 제목, 링크, 발행 시간                                        │
│  - 감성 색상 구분 (긍정/부정/중립)                              │
│  - 스크롤 가능한 목록                                           │
└──────────────────────────────────────────────────────────────────┘
```

### ⏱️ 시간 소요
- 뉴스 수집: ~5-10초 (병렬 처리)
- 감성 분석: ~2-3초
- **총 소요 시간**: ~7-13초

---

## 3. AI 분석 서비스 플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                         USER ACTION                              │
│  사용자가 index.html의 AI분석 섹션에서:                          │
│  - 종목 입력 (삼성전자, SK하이닉스 등)                          │
│  "AI분석 시작" 버튼 클릭                                        │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                    FRONTEND (index.js)                          │
│  const data = {                                                  │
│    companies: ["삼성전자", "SK하이닉스"],                        │
│    period: "1y"                                                  │
│  }                                                               │
│  fetch('/api/chart/ai/analyze', {method: 'POST', body: data})   │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              SPRING BOOT → FLASK                                │
│  Proxy: POST /api/ai/analyze                                    │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK (ai_analysis_service.py)                     │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 1. 각 종목별로 데이터 수집:                             │  │
│  │    for company in companies:                            │  │
│  │      ticker = ticker_to_name_map.get(company)           │  │
│  │      stock = yf.Ticker(ticker)                          │  │
│  │      df = stock.history(period=period)                  │  │
│  │                                                          │  │
│  │ 2. Random Forest 모델 학습 준비:                        │  │
│  │    from sklearn.ensemble import RandomForestClassifier   │  │
│  │                                                          │  │
│  │ 3. 특징 엔지니어링:                                     │  │
│  │    - 종가 (Close)                                        │  │
│  │    - 거래량 (Volume)                                     │  │
│  │    - EMA (이동평균)                                      │  │
│  │    - RSI (상대강도)                                      │  │
│  │    - 변화율 (Return)                                     │  │
│  │    - 변동성 (Volatility)                                │  │
│  │                                                          │  │
│  │ 4. 모델 학습 및 예측:                                   │  │
│  │    X_train, y_train = feature_engineering(df)           │  │
│  │    model = RandomForestClassifier()                     │  │
│  │    model.fit(X_train, y_train)                           │  │
│  │    prediction = model.predict(X_test)                   │  │
│  │    probabilities = model.predict_proba(X_test)          │  │
│  │                                                          │  │
│  │ 5. 결과 해석:                                           │  │
│  │    if prediction == 1:                                  │  │
│  │      direction = "상승"                                 │  │
│  │    elif prediction == -1:                               │  │
│  │      direction = "하락"                                 │  │
│  │    else:                                                 │  │
│  │      direction = "중립"                                 │  │
│  │                                                          │  │
│  │    confidence = max(probabilities[0])                    │  │
│  │    predicted_price = calculate_price_prediction()        │  │
│  └──────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK Response                                      │
│  {                                                               │
│    "success": true,                                              │
│    "model_prediction": {                                         │
│      "individual": {                                            │
│        "삼성전자": {                                             │
│          "direction": "상승",                                   │
│          "confidence": 0.75,                                    │
│          "predicted_price": 75000,                              │
│          "current_price": 72000                                 │
│        }                                                         │
│      }                                                           │
│    }                                                             │
│  }                                                               │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FRONTEND (index.js)                                │
│  AI 분석 결과 시각화:                                            │
│  - 예측 방향 (상승/하락/중립)                                    │
│  - 신뢰도 (0-100%)                                               │
│  - 예상 가격                                                      │
│  - 현재 가격                                                      │
└──────────────────────────────────────────────────────────────────┘
```

### ⏱️ 시간 소요
- 데이터 수집: ~3-5초
- 특징 추출: ~2-3초
- 모델 예측: ~1-2초
- **총 소요 시간**: ~6-10초

---

## 4. 포트폴리오 최적화 서비스 플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                         USER ACTION                              │
│  사용자가 portfolio.html에서:                                   │
│  - 종목 추가 (삼성전자, SK하이닉스, Apple 등)                  │
│  "AI 포트폴리오 최적화 시작" 버튼 클릭                           │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                    FRONTEND (portfolio.js)                      │
│  const data = {                                                  │
│    tickers: ["삼성전자 (005930.KS)", "Apple (AAPL)"],           │
│    expert_rules: {...}                                           │
│  }                                                               │
│  fetch('/api/chart/portfolio/optimize', {...})                   │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              SPRING BOOT → FLASK                                │
│  Proxy: POST /api/portfolio/optimize                           │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK (portfolio_optimizer_service.py)             │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 1. 모델 예측:                                           │  │
│  │    for ticker in tickers:                              │  │
│  │      stock = yf.Ticker(ticker)                          │  │
│  │      hist = stock.history(period='1y')                  │  │
│  │      recent_trend = calculate_trend(hist)               │  │
│  │      predicted_price = current_price * (1 + trend*0.5)  │  │
│  │                                                          │  │
│  │ 2. 뉴스 감성 분석:                                      │  │
│  │    sentiment_score = analyze_sentiment(tickers)         │  │
│  │    # 긍정적 뉴스 수 / 전체 뉴스 수                     │  │
│  │                                                          │  │
│  │ 3. 마코위츠 포트폴리오:                                 │  │
│  │    returns_data = calculate_returns(tickers)            │  │
│  │    mean_returns = returns_data.mean()                  │  │
│  │    cov_matrix = returns_data.cov()                      │  │
│  │    # 동등 가중으로 시작:                                │  │
│  │    weights = {ticker: 1/N for ticker in tickers}       │  │
│  │                                                          │  │
│  │ 4. AI 최종 포트폴리오 계산:                             │  │
│  │    for ticker in tickers:                              │  │
│  │      # 예측이 상승이면 비중 증가                        │  │
│  │      if prediction[ticker] == "상승":                  │  │
│  │        weights[ticker] *= 1.1                          │  │
│  │      # 뉴스 감성 반영                                   │  │
│  │      weights[ticker] *= (1 + sentiment_score*0.2)       │  │
│  │                                                          │  │
│  │    # 정규화:                                            │  │
│  │    total = sum(weights.values())                        │  │
│  │    weights = {k: v/total for k, v in weights.items()}   │  │
│  └──────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK Response                                      │
│  {                                                               │
│    "success": true,                                              │
│    "result": {                                                   │
│      "model_prediction": {...},                                 │
│      "sentiment_analysis": {...},                               │
│      "markowitz_portfolio": {...},                              │
│      "final_portfolio": {                                        │
│        "final_weights": {                                        │
│          "삼성전자": 0.35,                                       │
│          "Apple": 0.65                                          │
│        }                                                         │
│      }                                                           │
│    }                                                             │
│  }                                                               │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FRONTEND (portfolio.js)                            │
│  화면 표시:                                                       │
│  - RF 모델 예측 결과 테이블                                       │
│  - 뉴스 감성 지수 (긍정/부정/중립 개수)                          │
│  - 마코위츠 포트폴리오 (이상적 비중)                             │
│  - AI 최종 포트폴리오 (파이 차트)                                │
└──────────────────────────────────────────────────────────────────┘
```

### ⏱️ 시간 소요
- 종목별 데이터 수집: ~5-8초
- 마코위츠 계산: ~2-3초
- AI 조정: ~1-2초
- **총 소요 시간**: ~8-13초

---

## 5. AI 챗봇 서비스 플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                         USER ACTION                              │
│  사용자가 chatbot.html에서 질문 입력:                            │
│  "오늘의 시장 상황을 알려줘"                                     │
│  전송 버튼 클릭                                                   │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                    FRONTEND (chatbot.js)                        │
│  const data = {                                                  │
│    messages: [...previous_messages],                             │
│    username: "guest"                                             │
│  }                                                               │
│  fetch('/api/chart/chatbot/chat', {method: 'POST', body: data})  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              SPRING BOOT → FLASK                                │
│  Proxy: POST /api/chatbot/chat                                  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK (chatbot_service.py)                         │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ 1. OpenAI 클라이언트 초기화:                            │  │
│  │    from openai import OpenAI                            │  │
│  │    client = OpenAI(api_key=...)                         │  │
│  │                                                          │  │
│  │ 2. 시스템 프롬프트 추가:                                │  │
│  │    system_message = {                                    │  │
│  │      "role": "system",                                   │  │
│  │      "content": "당신은 금융 전문가 AI 챗봇입니다..."   │  │
│  │    }                                                      │  │
│  │                                                          │  │
│  │ 3. 메시지 목록 구성:                                    │  │
│  │    api_messages = [system_message] + user_messages      │  │
│  │                                                          │  │
│  │ 4. OpenAI API 호출:                                     │  │
│  │    response = client.chat.completions.create(          │  │
│  │      model="gpt-3.5-turbo",                             │  │
│  │      messages=api_messages,                              │  │
│  │      temperature=0.7,                                   │  │
│  │      max_tokens=1000                                    │  │
│  │    )                                                      │  │
│  │                                                          │  │
│  │ 5. 응답 추출:                                            │  │
│  │    ai_response = response.choices[0].message.content    │  │
│  └──────────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              OPENAI API (GPT-3.5 Turbo)                          │
│  AI가 금융 전문 답변 생성:                                        │
│  - 시장 동향 분석                                                │
│  - 주식 추천                                                     │
│  - 투자 전략 조언                                               │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FLASK Response                                      │
│  {                                                               │
│    "success": true,                                              │
│    "response": "오늘 미국 시장은 전반적으로 상승세를 보이고..." │
│  }                                                               │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              FRONTEND (chatbot.js)                              │
│  1. 사용자 메시지 표시 (오른쪽, 파란색)                          │
│  2. AI 응답 표시 (왼쪽, 회색)                                    │
│  3. 대화 기록에 추가                                            │
│  4. 자동 스크롤 (최신 메시지로)                                  │
└──────────────────────────────────────────────────────────────────┘
```

### ⏱️ 시간 소요
- OpenAI API 호출: ~3-5초
- 응답 생성 및 반환: ~0.5초
- **총 소요 시간**: ~3-6초

---

## 6. 인증/게시판 서비스 플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                         USER ACTION                              │
│  사용자가 login.html에서 ID/PW 입력                               │
│  "로그인" 버튼 클릭                                               │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│                    FRONTEND (login.html)                        │
│  fetch('/api/user/login', {                                      │
│    method: 'POST',                                               │
│    body: JSON.stringify({username, password})                     │
│  })                                                               │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              SPRING BOOT (UserController.java)                  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ @PostMapping("/login")                                  │  │
│  │                                                          │  │
│  │ 1. 사용자 조회:                                         │  │
│  │    User user = userRepository.findByUsername(username)  │  │
│  │                                                          │  │
│  │ 2. 비밀번호 확인:                                       │  │
│  │    if (!user.getPassword().equals(password))            │  │
│  │      return error                                       │  │
│  │                                                          │  │
│  │ 3. 세션 생성:                                           │  │
│  │    session.setAttribute("userId", user.getUserId())     │  │
│  │    session.setAttribute("username", user.getUsername()) │  │
│  │                                                          │  │
│  │ 4. 성공 응답 반환                                        │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────────────────────┬─────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              MARIA DB (users 테이블)                             │
│  SELECT * FROM users WHERE username = ?                          │
│  결과: userId, username, password                                │
└──────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌──────────────────────────────────────────────────────────────────┐
│              RESPONSE → FRONTEND                                │
│  {                                                               │
│    "success": true,                                              │
│    "message": "로그인되었습니다.",                                │
│    "username": "사용자명"                                         │
│  }                                                               │
└──────────────────────────────────────────────────────────────────┘
```

### 📝 게시판 글 작성 플로우

```
사용자 → board.html → BoardController.java
        ↓
    DiscussionPost 엔티티 생성
        ↓
    BoardService.createDiscussionPost()
        ↓
    DiscussionPostRepository.save()
        ↓
    MARIA DB (discussion_posts 테이블)
        ↓
    Response → Frontend
```

---

## 📊 전체 시스템 통계

### API 응답 시간 요약

| 서비스 | 평균 응답 시간 | 최장 응답 시간 |
|--------|--------------|--------------|
| 차트 분석 | 2-3초 | 5초 |
| 뉴스 분석 | 7-13초 | 20초 |
| AI 분석 | 6-10초 | 15초 |
| 포트폴리오 최적화 | 8-13초 | 20초 |
| AI 챗봇 | 3-6초 | 10초 |
| 로그인 | 0.1초 | 0.5초 |

### 동시 처리 가능한 요청 수
- Spring Boot: 100+ 요청/초
- Flask: 50+ 요청/초
- MariaDB: 500+ 쿼리/초

---

**문서 작성일**: 2025-10-27

