# 🏗️ 시스템 아키텍처 (Simplified)

## 📊 기술 스택 기반 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                         CLIENT LAYER                             │
│                         (HTML/JS/CSS)                            │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌─────────────┐ │
│  │ index.html │ │chart.html  │ │news.html   │ │portfolio    │ │
│  │chatbot.html│ │board.html  │ │login.html  │ │.html        │ │
│  └────────────┘ └────────────┘ └────────────┘ └─────────────┘ │
└────────────────────────────────┬────────────────────────────────┘
                                 │ HTTP/REST API
┌────────────────────────────────┴────────────────────────────────┐
│                         SPRING BOOT                              │
│                         (API Gateway)                           │
│                    Port: 8080                                    │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ • ChartController (차트 API 프록시)                      │  │
│  │ • UserController (사용자 인증)                           │  │
│  │ • BoardController (게시판 CRUD)                         │  │
│  │ • OpenAPI (API 문서화)                                  │  │
│  └──────────────────────────────────────────────────────────┘  │
└────────────────┬─────────────────────────────┬───────────────────┘
                 │                             │
                 │ Proxy                      │ Direct
                 ↓                             ↓
┌─────────────────────────────┐  ┌──────────────────────────────┐
│         FLASK               │  │        MySQL Database         │
│    (Python Service)         │  │    (User/Board Data)          │
│       Port: 5000            │  │       Port: 3306              │
│  ┌───────────────────────┐  │  │  ┌────────────────────────┐ │
│  │ • Yahoo Finance       │  │  │  │ users                   │ │
│  │ • News Crawling       │  │  │  │ discussion_posts        │ │
│  │ • AI/ML Analysis      │  │  │  │ memo_posts             │ │
│  │ • Portfolio Opt.     │  │  │  └────────────────────────┘ │
│  │ • OpenAI Chatbot     │  │  │                             │
│  └───────────────────────┘  │  └──────────────────────────────┘
└────────────────┬─────────────┘
                 │
                 ↓
┌─────────────────────────────────────────────────────────────────┐
│                      EXTERNAL SERVICES                          │
│  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐           │
│  │Yahoo Finance │ │OpenAI API   │ │RSS Feeds     │           │
│  │(yfinance)    │ │(GPT-3.5)     │ │(7 sources)   │           │
│  └──────────────┘ └──────────────┘ └──────────────┘           │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔧 기술 스택 매핑

### Layer별 기술 분류

```
┌─────────────────────────────────────────────────────────────────┐
│                    PRESENTATION LAYER                           │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │ • HTML5/CSS3                                             │  │
│  │ • JavaScript (ES6+)                                      │  │
│  │ • TradingView Lightweight Charts                         │  │
│  │ • Tailwind CSS                                           │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌─────────────────────────────────────────────────────────────────┐
│                    APPLICATION LAYER                           │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  Spring Boot (Java)                                      │  │
│  │  ┌────────────────────────────────────────────┐         │  │
│  │  │ • Spring MVC (REST API)                    │         │  │
│  │  │ • Spring Data JPA                          │         │  │
│  │  │ • OpenAPI Documentation                    │         │  │
│  │  │ • JUnit Testing                            │         │  │
│  │  └────────────────────────────────────────────┘         │  │
│  │                                                          │  │
│  │  Flask (Python)                                         │  │
│  │  ┌────────────────────────────────────────────┐         │  │
│  │  │ • Data Science (Pandas, NumPy)            │         │  │
│  │  │ • Machine Learning (Scikit-learn)         │         │  │
│  │  │ • Web Scraping (BeautifulSoup)            │         │  │
│  │  │ • NLP (OpenAI GPT-3.5)                   │         │  │
│  │  └────────────────────────────────────────────┘         │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                                 │
                                 ↓
┌─────────────────────────────────────────────────────────────────┐
│                      DATA LAYER                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  MySQL (MariaDB)                                          │  │
│  │  ┌────────────────────────────────────────────┐         │  │
│  │  │ • JPA/Hibernate (ORM)                    │         │  │
│  │  │ • ACID Transactions                      │         │  │
│  │  │ • User Management                        │         │  │
│  │  │ • Board Posts                           │         │  │
│  │  └────────────────────────────────────────────┘         │  │
│  │                                                          │  │
│  │  External APIs (via Flask)                              │  │
│  │  ┌────────────────────────────────────────────┐         │  │
│  │  │ • Yahoo Finance API (yfinance)            │         │  │
│  │  │ • OpenAI API                               │         │  │
│  │  │ • RSS Feeds                                │         │  │
│  │  └────────────────────────────────────────────┘         │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🎯 핵심 기술별 역할

### 1️⃣ **MySQL (MariaDB)**
```
┌──────────────────────────────────────────────────┐
│           MySQL Database (Port: 3306)           │
│  ┌────────────────────────────────────────┐   │
│  │  users                                   │   │
│  │  • userId (PK)                           │   │
│  │  • username (Unique)                     │   │
│  │  • password                              │   │
│  └────────────────────────────────────────┘   │
│  ┌────────────────────────────────────────┐   │
│  │  discussion_posts                        │   │
│  │  • postId (PK)                           │   │
│  │  • username                              │   │
│  │  • title, content                        │   │
│  │  • createdAt                             │   │
│  └────────────────────────────────────────┘   │
│  ┌────────────────────────────────────────┐   │
│  │  memo_posts                              │   │
│  │  • memoId (PK)                           │   │
│  │  • username                              │   │
│  │  • memoContent                          │   │
│  │  • createdAt                             │   │
│  └────────────────────────────────────────┘   │
└──────────────────────────────────────────────────┘

역할:
• 사용자 인증 정보 저장
• 게시판 데이터 영속화
• JPA/Hibernate를 통한 객체-관계 매핑
• 트랜잭션 관리
```

### 2️⃣ **Spring Boot**
```
┌────────────────────────────────────────────────────────────────┐
│                    Spring Boot Application                     │
│                         (Port: 8080)                           │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  @RestController                                        │  │
│  │  ┌────────────────────────────────────────────────┐   │  │
│  │  │  ChartController                               │   │  │
│  │  │  • /api/chart/*                                 │   │  │
│  │  │  • Flask 프록시                                │   │  │
│  │  └────────────────────────────────────────────────┘   │  │
│  │  ┌────────────────────────────────────────────────┐   │  │
│  │  │  UserController                               │   │  │
│  │  │  • /api/user/login                            │   │  │
│  │  │  • /api/user/logout                           │   │  │
│  │  │  • MySQL 직접 접근                            │   │  │
│  │  └────────────────────────────────────────────────┘   │  │
│  │  ┌────────────────────────────────────────────────┐   │  │
│  │  │  BoardController                               │   │  │
│  │  │  • /api/board/*                                │   │  │
│  │  │  • MySQL 직접 접근                            │   │  │
│  │  └────────────────────────────────────────────────┘   │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                               │
│  JPA/Hibernate + MySQL                                       │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  @Repository                                           │  │
│  │  • UserRepository                                      │  │
│  │  • DiscussionPostRepository                           │  │
│  │  • MemoPostRepository                                 │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                               │
│  Spring MVC                                                   │
│  • Static Files (HTML/JS/CSS)                               │
│  • OpenAPI Documentation                                     │
│                                                               │
│  JUnit Testing                                               │
│  • Unit Tests                                                │
│  • Integration Tests                                         │
│  • ConnectTests (Flask 연결 테스트)                         │
└────────────────────────────────────────────────────────────────┘

역할:
• API Gateway 역할
• 사용자 인증 및 세션 관리
• 데이터베이스 CRUD 작업
• OpenAPI 문서화
• 단위/통합 테스트
```

### 3️⃣ **Flask (Python)**
```
┌────────────────────────────────────────────────────────────────┐
│                    Flask Application                          │
│                         (Port: 5000)                          │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  @app.route('/api/*')                                  │  │
│  │  • CORS 활성화 (Cross-Origin)                          │  │
│  │  • JSON 응답                                            │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                               │
│  Services (Python Libraries)                                 │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  yahoo_finance_service                                 │  │
│  │  • yfinance (Yahoo Finance API)                       │  │
│  │  • 주가 데이터 수집                                     │  │
│  │  • EMA/RSI 계산                                         │  │
│  └────────────────────────────────────────────────────────┘  │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  ai_analysis_service                                   │  │
│  │  • scikit-learn (Random Forest)                       │  │
│  │  • 주가 방향성 예측                                     │  │
│  │  • pandas (데이터 처리)                                 │  │
│  └────────────────────────────────────────────────────────┘  │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  chatbot_service                                        │  │
│  │  • OpenAI API (GPT-3.5 Turbo)                         │  │
│  │  • 자연어 처리                                          │  │
│  └────────────────────────────────────────────────────────┘  │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  news_rss_service                                       │  │
│  │  • feedparser (RSS)                                    │  │
│  │  • BeautifulSoup4 (크롤링)                            │  │
│  └────────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────────┘

역할:
• 데이터 분석 및 처리
• AI/ML 모델 실행
• 외부 API 통합
• 웹 크롤링 및 RSS 파싱
```

### 4️⃣ **JUnit (Testing)**
```
┌────────────────────────────────────────────────────────────────┐
│                    JUnit Test Suite                            │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  @SpringBootTest                                       │  │
│  │  • ChartSpringApplicationTests                         │  │
│  │    - Spring Boot 컨텍스트 로딩 테스트                 │  │
│  │                                                          │  │
│  │  • ConnectTests                                        │  │
│  │    - Flask 서비스 연결 테스트                         │  │
│  │    - @Test void testFlaskConnection()                 │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                               │
│  Coverage:                                                   │
│  • Unit Tests (Service Layer)                               │
│  • Integration Tests (API Layer)                            │
│  • Connection Tests (Flask Integration)                     │
└────────────────────────────────────────────────────────────────┘

역할:
• 단위 테스트
• 통합 테스트
• Flask 연동 테스트
• 코드 커버리지 확보
```

### 5️⃣ **OpenAPI (API Documentation)**
```
┌────────────────────────────────────────────────────────────────┐
│                    OpenAPI Specifications                      │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  Rest API Documentation                                │  │
│  │  • Swagger UI                                           │  │
│  │  • API Endpoints 정의                                   │  │
│  │  • Request/Response 스키마                              │  │
│  └────────────────────────────────────────────────────────┘  │
│                                                               │
│  Documented Endpoints:                                        │
│  ┌────────────────────────────────────────────────────────┐  │
│  │  /api/chart/data/{ticker}/{interval}/{ema}/{rsi}      │  │
│  │  /api/chart/analyze                                    │  │
│  │  /api/chart/news/rss                                   │  │
│  │  /api/chart/ai/analyze                                 │  │
│  │  /api/user/login                                       │  │
│  │  /api/user/logout                                      │  │
│  │  /api/board/*                                          │  │
│  └────────────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────────────┘

역할:
• API 자동 문서화
• Swagger UI로 API 테스트
• 요청/응답 스키마 정의
• API 버전 관리
```

---

## 🔄 전체 데이터 플로우 (큼지막한 관점)

```
┌─────────────────────────────────────────────────────────────────┐
│                    FRONTEND (Browser)                           │
│  HTML/JavaScript                                                │
│  • 사용자 입력                                                   │
│  • REST API 호출                                                │
└────────────────────────────────┬────────────────────────────────┘
                                 │ HTTP/REST
┌────────────────────────────────┴────────────────────────────────┐
│                    SPRING BOOT (API Gateway)                    │
│  • 라우팅                                                       │
│  • 인증 (HttpSession)                                           │
│  • OpenAPI 문서화                                               │
└────────────┬─────────────────────────────┬──────────────────────┘
             │                             │
      ┌──────┴──────┐            ┌────────┴────────┐
      │              │            │                 │
      ↓              ↓            ↓                 ↓
┌─────────┐   ┌──────────┐  ┌──────────┐   ┌────────────┐
│ MySQL   │   │ Flask    │  │ JUnit    │   │ OpenAPI    │
│ Database│   │(Python)  │  │ Tests    │   │ Docs       │
│         │   │          │  │          │   │            │
│ • Users │   │ • yfinance│ │ • Unit   │   │ • Swagger  │
│ • Posts │   │ • sklearn │ │ • Integ. │   │ • API Spec │
└─────────┘   │ • OpenAI  │ │ • Conn.  │   │            │
              │ • Crawling│ └──────────┘   └────────────┘
              └──────────┘
                 ↓
              External APIs
              (Yahoo, OpenAI)
```

---

## 📈 기술 스택 요약표

| 기술 | 버전 | 역할 | 포트 |
|------|------|------|------|
| **MySQL** | MariaDB 10.x | 사용자/게시판 데이터 저장 | 3306 |
| **Spring Boot** | 3.x | API Gateway, REST API | 8080 |
| **Flask** | 3.x | 데이터 분석, AI/ML | 5000 |
| **JUnit** | 5.x | 단위/통합 테스트 | - |
| **OpenAPI** | 3.x | API 문서화 (Swagger) | 8080/docs |
| **yfinance** | 0.2.x | Yahoo Finance API | - |
| **OpenAI** | GPT-3.5 | AI 챗봇 | API |
| **Pandas** | 2.x | 데이터 분석 | - |
| **Scikit-learn** | 1.7.x | ML 모델 | - |
| **BeautifulSoup** | 4.x | 웹 크롤링 | - |

---

## 🎯 아키텍처 특징

### ✅ **계층 분리 (Layered Architecture)**
1. **Presentation Layer**: HTML/JS (Frontend)
2. **Application Layer**: Spring Boot + Flask
3. **Data Layer**: MySQL + External APIs

### ✅ **마이크로서비스 패턴**
- **Spring Boot**: 인프라 관리 (Java)
- **Flask**: 데이터 분석 (Python)
- 각 서비스는 독립적으로 배포 가능

### ✅ **RESTful API**
- OpenAPI 명세를 통한 표준화
- Swagger UI로 API 테스트
- JSON 기반 통신

### ✅ **데이터 영속성**
- MySQL로 사용자/게시판 데이터 저장
- JPA/Hibernate ORM 사용
- ACID 트랜잭션 보장

---

**Created**: 2025-10-27  
**Version**: Simplified Architecture

